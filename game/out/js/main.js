!function(a,b){b["true"]=a;var c=function(){var a=function(){this.hostName="http://extreme-orbit.herokuapp.com",this.debug=!1,this.tips=["Maybe you should try not to kiss planets?","UFO's aren't that fond of rockets..","You can do better! Try agian! C'mon!","I agree it can be hot inside the rocket.. But this?","Can we agree to not do this from now on?"]};return a}(),d=function(){var a=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d};return a}(),e=(function(){function a(){}return a.checkCollision=function(a,b){var c=a.x+a.width/2-(b.x+b.width/2),d=a.y+a.height/2-(b.y+b.height/2),e=a.width/2+b.width/2,f=a.height/2+b.height/2,g=(Math.abs(c)<e&&Math.abs(d)<f,"");if(Math.abs(c)<e&&Math.abs(d)<f){var h=e-Math.abs(c),i=f-Math.abs(d);return h>=i?d>0?(g="t",a.y+=i):(g="b",a.y-=i):c>0?(g="l",a.x+=h):(g="r",a.x-=h),g}},a}(),function(){var a=function(a,b){_.bindAll(this),this.width=a,this.height=b,this.container=new createjs.Container,this.background=new createjs.Shape,this.background.graphics.beginFill("#efefef"),this.background.graphics.drawRect(0,0,a,b),this.background.graphics.endFill()};return a.prototype.addObject=function(a){this.container.addChild(a)},a.prototype.removeObject=function(a){this.container.removeChild(a)},a.prototype.followRocket=function(a,b,c){var d=-(a.y-b/2)+c;this.container.y=d<this.boundW?this.boundW:d>0?0:d},a}());window.socket=io.connect("http://"+window.location.host+"/");{var f=function(){var a=function(){_.bindAll(this),this.settings=new c,$(".launchscreen").removeClass("out"),this.h1=Math.PI/2,this.v1=1,this.difficultyMultiplier=1,this.planetDistance=400,this.debug=!0,this.useController=!0,this.planetsMoved=0,this.previousNumberOfMovedAndIncreasedDifficulty=0,this.settings=new c,this.socket=window.socket,this.cWidth=500,this.cHeight=700,this.vector1=new o(0,0,this.h1,this.v1),this.debug&&$("#crash, #inbound").removeClass("hide"),this.settings.debug||(this.soundboard=new k,this.soundboard.lobbyloop.fadeIn(3e3),$("#mute").click(function(a){a.preventDefault(),buzz.all().toggleMute(),$(this).hasClass("dim")?$(this).removeClass("dim"):$(this).addClass("dim")})),this.bind()};return a.prototype.bind=function(){var a=this;$("#launch").click(this.showConnect),$("#no-controller").click(this.proceedWithoutController),this.socket.on("join:accept",function(){a.startGame(),$("#multiplayerstats #controller1").removeClass("dim")}),this.socket.on("join:player2",function(){$("#multiplayerstats #controller2").removeClass("dim")}),this.socket.on("gameplay:restart",this.restart),window.onbeforeunload=function(){this.socket.emit("game:stop"),this.socket.disconnect()}},a.prototype.showConnect=function(a){a.preventDefault(),$("#launch").addClass("out");var b=Math.floor(1e3*Math.random());this.socket.emit("game:start",{code:b}),this.rocket=new i(-5,-10,this.vector1,this.soundboard),this.rocket.identifier=b,$(".connect-instructions").removeClass("out"),$(".connect-instructions p span").text(this.rocket.identifier),$(".connect-instructions p em").text(this.settings.hostName),$("#multiplayerstats").removeClass("out"),$("#multiplayerstats p span").text(this.rocket.identifier)},a.prototype.proceedWithoutController=function(a){a.preventDefault(),this.useController=!1,this.startGame(),$("#multiplayerstats").addClass("out")},a.prototype.startGame=function(){this.useController&&this.socket.emit("gameplay:start"),$(".launchscreen").addClass("out"),$(".connect-instructions").addClass("out"),this.stage=new createjs.Stage("canvas"),this.stage.canvas.width=this.cWidth,this.stage.canvas.height=this.cHeight,this.galaxy=new e(this.cWidth,3e5),this.galaxy.container.y=-(this.galaxy.height-this.cHeight),this.stage.addChild(this.galaxy.container),this.bounds=[],this.createBounds(),this.currentPlanetYPos=this.galaxy.height-320,this.currentUFOYPos=this.galaxy.height-3e3-Math.floor(200*Math.random()),this.currentStarYpos=this.galaxy.height-1700-Math.floor(300*Math.random()),this.currentManipulatorYPos=this.galaxy.height-1e3-Math.floor(400*Math.random()),this.planets=[],this.ufos=[],this.stars=[],this.rocketManipulators=[],this.createPlanets(25),this.createUFOs(7),this.createStars(3),this.createRocketManipulators(8),this.rocket.x=150,this.rocket.y=this.galaxy.height-20,this.galaxy.addObject(this.rocket.rocketImg),this.galaxy.addObject(this.rocket.sprite),this.stage.setChildIndex(this.rocket.sprite,this.stage.getNumChildren()-1),this.gamestats=new g(15,30,2),this.stage.addChild(this.gamestats.container),this.ticker=createjs.Ticker,this.ticker.RAF=!0,this.ticker.setFPS(60),this.ticker.addEventListener("tick",this.tickHandler),this.playing=!0,this.useController?$(".restart-instructions-controller").removeClass("hide"):$(".restart-instructions-no-controller").removeClass("hide"),this.settings.debug||(this.soundboard.lobbyloop.stop(),this.soundboard.gameloop.fadeIn(2e3),this.soundboard.rocketloop.play())},a.prototype.tickHandler=function(){this.rocket.x<0?this.rocket.x=0:this.rocket.x>this.cWidth&&(this.rocket.x=this.cWidth);for(var a=!1,b=0;b<this.planets.length;b++){var c=n.getDistance(this.planets[b],this.rocket);if(c<this.planets[b].gravityRadius){var d=n.getAngle(this.planets[b],this.rocket),e=this.planets[b].gravityRadius-c;this.rocket.workingVectors.push(new o(this.rocket.x,this.rocket.y,d,3*e))}var f=ndgmr.checkPixelCollision(this.planets[b].planetImg,this.rocket.rocketImg);f===!1||this.rocket.invincible||(a=!0)}a&&(this.gamestats.takeAllLives(),this.endGame());for(var g=0;g<this.ufos.length;g++){var h=ndgmr.checkPixelCollision(this.ufos[g].ufoImg,this.rocket.rocketImg);if(h!==!1&&!this.rocket.invincible&&(this.rocket.dieOnce(),this.galaxy.removeObject(this.ufos[g].container),this.ufos.splice(g,1),this.gamestats.takeALive(),0===this.rocket.remainingLives))return this.endGame(),!1}for(var i=0;i<this.stars.length;i++){var j=ndgmr.checkPixelCollision(this.stars[i].starImg,this.rocket.rocketImg);j!==!1&&(this.stars[i].y=this.currentStarYpos,this.stars[i].update(),this.currentStarYpos-=Math.floor(3e3*Math.random()+5e3),this.rocket.makeInvincible(1e4),this.gamestats.showSomething("invincible",10))}for(var k=0;k<this.rocketManipulators.length;k++){var l=ndgmr.checkPixelCollision(this.rocketManipulators[k].arrows,this.rocket.rocketImg);if(l!==!1&&!this.rocketManipulators[k].isUsed){var m=this.rocketManipulators[k].type;"up"===m?(this.rocket.boostEngine(),this.gamestats.showSomething("boostEngine",3)):(this.rocket.breakEngine(),this.gamestats.showSomething("breakEngine",3)),this.rocketManipulators[k].isUsed=!0}}this.gamestats.updateScore(this.galaxy.container.y),this.planetsMoved%6===0&&0!==this.planetsMoved&&this.planetsMoved!==this.previousNumberOfMovedAndIncreasedDifficulty&&(this.planetDistance-=this.planetDistance>160?20:1,this.difficultyMultiplier+=this.difficultyMultiplier>=1.75?.01:this.difficultyMultiplier>=1.5?.05:.1,this.previousNumberOfMovedAndIncreasedDifficulty=this.planetsMoved),this.reArrangePlanets(),this.reArrangeUfos(),this.reArrangeStars(),this.reArrangeManipulators(),this.playing&&(this.rocket.update(),this.galaxy.followRocket(this.rocket,this.cHeight,230)),this.stage.update()},a.prototype.endGame=function(){this.playing=!1,this.ticker.removeEventListener("tick",this.tickHandler),this.currentPlanetYPos=this.galaxy.height-320,this.currentUFOYPos=this.galaxy.height-3e3-Math.floor(200*Math.random()),this.currentStarYpos=this.galaxy.height-1700-Math.floor(300*Math.random()),this.currentManipulatorYPos=this.galaxy.height-1e3-Math.floor(400*Math.random()),this.galaxy.removeObject(this.rocket.sprite),this.stage.removeChild(this.galaxy.container),this.stage.update(),this.difficultyMultiplier=1,this.planetsMoved=1,this.planetDistance=400,this.previousNumberOfMovedAndIncreasedDifficulty=1,this.rocket=void 0,this.vector1=void 0,this.planets=[],this.ufos=[],this.stars=[],this.rocketManipulators=[];var a=this;this.useController?$(".restart-instructions-controller").removeClass("out"):($(".restart-instructions-no-controller").removeClass("out"),$(".restart-instructions-no-controller .tip span").text(this.settings.tips[Math.floor(Math.random()*this.settings.tips.length)]),document.getElementById("restart").addEventListener("click",a.restart)),this.useController&&this.socket.emit("gameplay:stop"),this.settings.debug||(this.soundboard.gameloop.stop(),this.soundboard.invincible.stop(),this.soundboard.rocketloop.stop(),this.soundboard.endgame.play(),this.soundboard.lobbyloop.fadeIn(2e3))},a.prototype.restart=function(a){var b=this;void 0!==a&&a.preventDefault(),this.useController?$(".restart-instructions-controller").addClass("out"):($(".restart-instructions-no-controller").addClass("out"),document.getElementById("restart").removeEventListener("click",b.restart)),this.galaxy=new e(this.cWidth,3e5),this.galaxy.container.y=-(this.galaxy.height-this.cHeight),this.stage.addChild(this.galaxy.container),this.createPlanets(25),this.createUFOs(7),this.createStars(3),this.createRocketManipulators(8),this.gamestats.relive(),this.stage.setChildIndex(this.gamestats.container,this.stage.getNumChildren()-1),this.vector1=new o(0,0,this.h1,this.v1),this.rocket=new i(-5,-10,this.vector1,this.soundboard),this.rocket.x=150,this.rocket.y=this.galaxy.height-20,this.galaxy.addObject(this.rocket.rocketImg),this.galaxy.addObject(this.rocket.sprite),this.ticker.addEventListener("tick",this.tickHandler),this.playing=!0,this.settings.debug||(this.soundboard.lobbyloop.stop(),this.soundboard.gameloop.fadeIn(2e3),this.soundboard.rocketloop.play(),this.soundboard.newlife.play())},a.prototype.reArrangePlanets=function(){for(var a=0;a<this.planets.length;a++)this.rocket.y-this.planets[a].y<-this.cHeight&&(this.planets[a].y=this.currentPlanetYPos,this.planets[a].x=Math.floor(Math.random()*this.cWidth),this.planets[a].update(this.difficultyMultiplier),this.currentPlanetYPos-=this.planetDistance,this.planetsMoved++)},a.prototype.reArrangeUfos=function(){for(var a=0;a<this.ufos.length;a++)this.rocket.y-this.ufos[a].startYPos<-this.cHeight&&(this.ufos[a].startYPos=this.currentUFOYPos,this.ufos[a].update(this.difficultyMultiplier),this.currentUFOYPos-=Math.floor(3e3*Math.random()+2500))},a.prototype.reArrangeStars=function(){for(var a=0;a<this.stars.length;a++)this.rocket.y-this.stars[a].y<-this.cHeight&&(this.stars[a].y=this.currentStarYpos,this.stars[a].x=Math.floor(Math.random()*this.cWidth),this.stars[a].update(),this.currentStarYpos-=Math.floor(3e3*Math.random()+5e3))},a.prototype.reArrangeManipulators=function(){for(var a=0;a<this.rocketManipulators.length;a++)this.rocket.y-this.rocketManipulators[a].y<-this.cHeight&&(this.rocketManipulators[a].y=this.currentManipulatorYPos,this.rocketManipulators[a].x=Math.floor(Math.random()*this.cWidth),this.rocketManipulators[a].update(),this.currentManipulatorYPos-=Math.floor(5e3*Math.random()+1500))},a.prototype.createPlanets=function(a){for(var b=0;a-1>b;b++)this.planets.push(new h(Math.floor(Math.random()*this.cWidth),this.currentPlanetYPos,Math.floor(20*Math.random())+20)),this.currentPlanetYPos-=this.planetDistance,this.galaxy.addObject(this.planets[b].container)},a.prototype.createUFOs=function(a){for(var b=0;a-1>b;b++)this.ufos.push(new m(20,this.currentUFOYPos)),this.currentUFOYPos-=Math.floor(3e3*Math.random()+2500),this.galaxy.addObject(this.ufos[b].container)},a.prototype.createStars=function(a){for(var b=0;a-1>b;b++)this.stars.push(new l(Math.floor(Math.random()*this.cWidth),this.currentStarYpos)),this.currentStarYpos-=Math.floor(3e3*Math.random()+5e3),this.galaxy.addObject(this.stars[b].container)},a.prototype.createRocketManipulators=function(a){for(var b=0;a-1>b;b++)this.rocketManipulators.push(new j(Math.floor(Math.random()*this.cWidth),this.currentManipulatorYPos)),this.currentManipulatorYPos-=Math.floor(5e3*Math.random()+1500),this.galaxy.addObject(this.rocketManipulators[b].container)},a.prototype.createBounds=function(){this.bounds.push(new d(this.galaxy.width-1,0,1,this.galaxy.height)),this.bounds.push(new d(0,0,1,this.galaxy.height))},a}(),g=function(){var a=function(a,b,c){_.bindAll(this),this.x=a,this.y=b,this.lives=c,this.heartImgs=[],this.heartImgsXPos=80,this.container=new createjs.Container,this.countdownContainer=new createjs.Container,this.countdownContainer.alpha=0,this.container.addChild(this.countdownContainer),this.score=new createjs.Text("0000","20px sequibold","#efefef"),this.score.textBaseline="alphabetic",this.container.addChild(this.score),this.defaultStar=new createjs.Bitmap("img/default-star.png"),this.defaultStar.x=367,this.defaultStar.y=19,this.countdownContainer.addChild(this.defaultStar),this.boost=new createjs.Bitmap("img/boost.png"),this.boost.x=367,this.boost.y=19,this.countdownContainer.addChild(this.boost),this.break=new createjs.Bitmap("img/turtle.png"),this.break.x=362,this.break.y=21,this.countdownContainer.addChild(this.break),this.countdownFill=new createjs.Shape,this.countdownFill.graphics.beginFill("#e7c54e"),this.countdownFill.graphics.drawRect(0,0,90,18),this.countdownFill.graphics.endFill(),this.countdownFill.x=390,this.countdownFill.y=15,this.countdownContainer.addChild(this.countdownFill),this.countdownBox=new createjs.Shape,this.countdownBox.graphics.beginStroke("#ffffff").setStrokeStyle(1),this.countdownBox.graphics.drawRect(0,0,90,18),this.countdownBox.graphics.endFill(),this.countdownBox.x=390,this.countdownBox.y=15,this.countdownContainer.addChild(this.countdownBox);for(var d=0;d<this.lives;d++)this.heartImgs.push(new createjs.Bitmap("img/heart.png")),this.heartImgs[d].x=this.heartImgsXPos,this.heartImgs[d].y=10,this.container.addChild(this.heartImgs[d]),this.heartImgsXPos+=30;this.score.x=this.x,this.score.y=this.y};return a.prototype.updateScore=function(a){this.score.text=n.proceedZeros(Math.floor(3e5+a-600))},a.prototype.takeALive=function(){this.container.removeChild(this.heartImgs[this.heartImgs.length-1]),this.heartImgs.splice(this.heartImgs.length-1,1)},a.prototype.takeAllLives=function(){for(var a=0;a<this.heartImgs.length;a++)this.container.removeChild(this.heartImgs[a]);this.heartImgs=[]},a.prototype.showSomething=function(a,b){TweenMax.killTweensOf(this.countdownFill),this.countdownFill.graphics.clear(),this.defaultStar.alpha=0,this.boost.alpha=0,this.break.alpha=0;var c="#e7c54e";switch(a){case"boostEngine":c="#81d766",this.boost.alpha=1;break;case"breakEngine":c="#b11500",this.break.alpha=1;break;default:this.defaultStar.alpha=1}this.countdownFill.graphics.beginFill(c),this.countdownFill.graphics.drawRect(0,0,90,18),this.countdownFill.graphics.endFill(),this.countdownFill.scaleX=1,this.countdownContainer.alpha=1,TweenMax.to(this.countdownFill,b,{scaleX:0,repeat:0,ease:Linear.easeNone,onComplete:this.hideCountdown})},a.prototype.hideCountdown=function(){TweenMax.to(this.countdownContainer,.7,{alpha:0})},a.prototype.relive=function(){this.heartImgsXPos=70;for(var a=0;a<this.lives;a++)this.heartImgs.push(new createjs.Bitmap("img/heart.png")),this.heartImgs[a].x=this.heartImgsXPos,this.heartImgs[a].y=10,this.container.addChild(this.heartImgs[a]),this.heartImgsXPos+=30},a}(),h=function(){var a=function(a,b,c){_.bindAll(this),this.x=a,this.y=b,this.radius=c,this.gravityRadius=c+50+Math.floor(100*Math.random()),this.container=new createjs.Container,this.gravityField=new createjs.Shape,this.gravityField.graphics.beginStroke("#3f3a49").setStrokeStyle(2).beginFill("#484356"),this.gravityField.graphics.drawCircle(-c/2,-c/2,this.gravityRadius),this.gravityField.graphics.endFill(),this.gravityField.alpha=.1,this.container.addChild(this.gravityField),this.stroke=new createjs.Shape,this.stroke.graphics.beginStroke("#3f3a49").setStrokeStyle(2),this.stroke.graphics.drawCircle(-c/2,-c/2,this.gravityRadius),this.stroke.graphics.endFill(),this.container.addChild(this.stroke);var d=Math.floor(100*Math.random());this.planetImg=33>d?new createjs.Bitmap("img/planet.png"):d>=33&&66>d?new createjs.Bitmap("img/planet-blue.png"):new createjs.Bitmap("img/planet-orange.png"),this.planetImg.scaleX=1/254*2*c,this.planetImg.scaleY=1/247*2*c,this.container.addChild(this.planetImg),this.planetImg.x=this.x-Math.floor(127*this.planetImg.scaleX)-this.radius/2,this.planetImg.y=this.y-Math.floor(123.5*this.planetImg.scaleY)-this.radius/2,this.stroke.x=this.x,this.stroke.y=this.y,this.gravityField.x=this.x,this.gravityField.y=this.y;var e=Math.floor(3*Math.random())+2;TweenMax.to(this.container,e,{y:7*++e,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.planetImg,e,{y:this.planetImg.y+10,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.planetImg,e,{rotation:10,yoyo:!0,repeat:-1,ease:Sine.easeInOut})};return a.prototype.update=function(a){this.gravityRadius=this.radius+50+Math.floor(100*Math.random()*a);var b=this.radius*a,c=Math.floor(100*Math.random());this.planetImg=33>c?new createjs.Bitmap("img/planet.png"):c>=33&&66>c?new createjs.Bitmap("img/planet-blue.png"):new createjs.Bitmap("img/planet-orange.png"),this.planetImg.scaleX=1/254*2*b,this.planetImg.scaleY=1/247*2*b,this.container.addChild(this.planetImg),this.gravityField.graphics.clear(),this.gravityField.graphics.beginStroke("#3f3a49").setStrokeStyle(2).beginFill("#484356"),this.gravityField.graphics.drawCircle(-this.radius/2,-this.radius/2,this.gravityRadius),this.gravityField.graphics.endFill(),this.gravityField.alpha=.1,this.stroke.graphics.clear(),this.stroke.graphics.beginStroke("#3f3a49").setStrokeStyle(2),this.stroke.graphics.drawCircle(-this.radius/2,-this.radius/2,this.gravityRadius),this.stroke.graphics.endFill(),this.planetImg.x=this.x-Math.floor(127*this.planetImg.scaleX)-this.radius/2,this.planetImg.y=this.y-Math.floor(123.5*this.planetImg.scaleY)-this.radius/2,this.gravityField.x=this.x,this.gravityField.y=this.y,this.stroke.x=this.x,this.stroke.y=this.y;var d=Math.floor(3*Math.random())+2;TweenMax.to(this.container,d,{y:7*++d,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.planetImg,d,{y:this.planetImg.y+10,yoyo:!0,repeat:-1,ease:Sine.easeInOut}),TweenMax.to(this.planetImg,d,{rotation:10,yoyo:!0,repeat:-1,ease:Sine.easeInOut})},a}(),i=function(){var a=function(a,b,d,e){_.bindAll(this),this.x=a,this.y=b,this.rocketVector=d,this.soundboard=e,this.workingVectors=[],this.remainingLives=2,this.invincible=!1,this.settings=new c,this.speedBeforeManipulator=0,this.isUnderManipulation=!1,this.socket=window.socket,this.RocketAnim=new createjs.SpriteSheet({images:["img/rocket.png"],frames:[[1952,2,48,104],[1902,2,48,104],[1852,2,48,104],[1802,2,48,104],[1752,2,48,104],[1702,2,48,104],[1652,2,48,104],[1602,2,48,104],[1552,2,48,104],[1502,2,48,104],[1452,2,48,104],[1402,2,48,104],[1352,2,48,104],[1302,2,48,104],[1252,2,48,104],[1202,2,48,104],[1152,2,48,104],[1102,2,48,104],[1052,2,48,104],[1002,2,48,104],[952,2,48,104],[902,2,48,104],[852,2,48,104],[802,2,48,104],[752,2,48,104],[702,2,48,104],[652,2,48,104],[602,2,48,104],[552,2,48,104],[502,2,48,104],[452,2,48,104],[402,2,48,104],[352,2,48,104],[302,2,48,104],[252,2,48,104],[202,2,48,104],[152,2,48,104],[102,2,48,104],[52,2,48,104],[2,2,48,104]],animations:{fly:[30,39],boost:[0,9],"break":[10,19],invincible:[20,29]},framerate:10}),this.rocketImg=new createjs.Bitmap("img/rocket-ghost.png"),this.rocketImg.regX=26,this.rocketImg.regY=52,this.rocketImg.x=this.x,this.rocketImg.y=this.y,this.sprite=new createjs.Sprite(this.RocketAnim,"fly"),this.sprite.framerate=10,this.sprite.regX=24,this.sprite.regY=52,this.sprite.x=this.x,this.sprite.y=this.y,this.identifier=void 0,this.bind()};return a.prototype.bind=function(){var a=this;this.socket.on("move",function(b){var c=b.tilt/57.2957795;a.updateHeading(c+Math.PI/2)}),this.socket.on("speed:change",function(b){this.isUnderManipulation||(a.rocketVector.v=700*b.speed)}),window.onkeydown=this.keyDownHandler},a.prototype.keyDownHandler=function(a){switch(a.preventDefault(),a.keyCode){case 38:this.rocketVector.v+=10;break;case 40:this.rocketVector.v-=10;break;case 37:this.updateHeading(this.rocketVector.h-.1);break;case 39:this.updateHeading(this.rocketVector.h+.1)}},a.prototype.update=function(){for(var a=this.rocketVector.clone(),b=0;b<this.workingVectors.length;b++)a.addVector(this.workingVectors[b]);var c=a.getEndCoords();this.x+=parseFloat(c.x/100),this.y+=parseFloat(c.y/100),this.sprite.x=this.x,this.sprite.y=this.y,this.rocketImg.x=this.x,this.rocketImg.y=this.y,TweenMax.to(this.sprite,.5,{rotation:this.rocketVector.getHeading()-90}),TweenMax.to(this.rocketImg,.5,{rotation:this.rocketVector.getHeading()-90}),this.workingVectors=[],this.settings.debug||this.soundboard.rocketloop.setVolume(this.rocketVector.v/5)},a.prototype.updateHeading=function(a){(this.rocketVector.h<=Math.PI||0!==this.rocketVector.h)&&(this.rocketVector.setHeading(a),a>Math.PI?this.rocketVector.setHeading(Math.PI):0>a&&this.rocketVector.setHeading(0))},a.prototype.setDirectSpeed=function(a){this.rocketVector.v=a},a.prototype.dieOnce=function(){this.remainingLives--,this.settings.debug||this.soundboard.lostlife.play()},a.prototype.makeInvincible=function(a){this.invincible=!0,this.sprite.gotoAndPlay("invincible"),this.settings.debug||(this.soundboard.gameloop.pause(),this.soundboard.invincible.play());var b=this;setTimeout(function(){b.invincible=!1,b.sprite.gotoAndPlay("fly"),b.settings.debug||(b.soundboard.invincible.stop(),b.soundboard.gameloop.play())},a)},a.prototype.breakEngine=function(){this.isUnderManipulation=!0,this.speedBeforeManipulator=this.rocketVector.v,this.rocketVector.v=Math.floor(this.speedBeforeManipulator/2),this.sprite.gotoAndPlay("break"),this.settings.debug||this.soundboard.break.play();var a=this;setTimeout(function(){a.isUnderManipulation=!1,a.rocketVector.v=a.speedBeforeManipulator,a.sprite.gotoAndPlay("fly")},3e3)},a.prototype.boostEngine=function(){this.isUnderManipulation=!0,this.speedBeforeManipulator=this.rocketVector.v,this.rocketVector.v=900,this.sprite.gotoAndPlay("boost"),this.settings.debug||this.soundboard.boost.play();var a=this;setTimeout(function(){a.isUnderManipulation=!1,a.rocketVector.v=a.speedBeforeManipulator,a.sprite.gotoAndPlay("fly")},3e3)},a}(),j=function(){var a=function(a,b){_.bindAll(this),this.x=a,this.y=b,this.type="up",this.isUsed=!1,this.container=new createjs.Container,this.arrows=new createjs.Bitmap("img/manipulator.png"),this.arrows.x=this.x,this.arrows.y=this.y,this.container.addChild(this.arrows),Math.floor(100*Math.random())<50&&(this.type="down",this.arrows.rotation=180)};return a.prototype.update=function(){this.arrows.x=this.x,this.arrows.y=this.y,this.isUsed=!1},a}(),k=function(){var a=function(){this.lobbyloop=new buzz.sound("sound/lobby.mp3",{preload:!0,loop:!0}),this.gameloop=new buzz.sound("sound/game.mp3",{preload:!0,loop:!0}),this.endgame=new buzz.sound("sound/endgame.mp3",{preload:!0,loop:!1}),this.boost=new buzz.sound("sound/boost.mp3",{preload:!0,loop:!1}),this.break=new buzz.sound("sound/enginebreak.mp3",{preload:!0,loop:!1}),this.lostlife=new buzz.sound("sound/lostlife.mp3",{preload:!0,loop:!1}),this.newlife=new buzz.sound("sound/newlife.mp3",{preload:!0,loop:!1}),this.invincible=new buzz.sound("sound/invincible.mp3",{preload:!0,loop:!0}),this.rocketloop=new buzz.sound("sound/rocketloop.mp3",{preload:!0,loop:!0}),this.rocketloop.setVolume(0)};return a}(),l=function(){var a=function(a,b){_.bindAll(this),this.x=a,this.y=b,this.container=new createjs.Container,this.starImg=new createjs.Bitmap("img/star.png"),this.container.addChild(this.starImg),this.starImg.x=this.x+30,this.starImg.y=this.y,TweenMax.to(this.starImg,3,{bezier:[{x:this.x-30,y:this.y},{x:this.x+30,y:this.y}],ease:Linear.easeNone,repeat:-1})};return a.prototype.update=function(){TweenMax.killTweensOf(this.starImg),this.container.removeChild(this.starImg),this.starImg=new createjs.Bitmap("img/star.png"),this.container.addChild(this.starImg),this.starImg.x=this.x+30,this.starImg.y=this.y,TweenMax.to(this.starImg,3,{bezier:[{x:this.x-30,y:this.y},{x:this.x+30,y:this.y}],ease:Linear.easeNone,repeat:-1})},a}(),m=function(){var a=function(a,b){_.bindAll(this),this.startYPos=b,this.startXPos=a,this.container=new createjs.Container;var c=Math.floor(101*Math.random());this.color=c>50?"orange":"yellow",this.ufoImg=new createjs.Bitmap("img/ufo-"+this.color+".png"),this.container.addChild(this.ufoImg),this.ufoImg.x=this.startXPos,this.ufoImg.y=this.startYPos,"orange"===this.color?TweenMax.to(this.ufoImg,9,{bezier:[{x:230,y:this.startYPos+4},{x:450,y:this.startYPos-10},{x:140,y:this.startYPos+15},{x:20,y:this.startYPos}],ease:Power1.easeInOut,repeat:-1}):TweenMax.to(this.ufoImg,7,{bezier:[{x:210,y:this.startYPos+13},{x:430,y:this.startYPos-7},{x:20,y:this.startYPos}],ease:Sine.easeInOut,repeat:-1})};return a.prototype.update=function(){TweenMax.killTweensOf(this.ufoImg),this.container.removeChild(this.ufoImg);var a=Math.floor(101*Math.random());this.color=a>50?"orange":"yellow",this.ufoImg=new createjs.Bitmap("img/ufo-"+this.color+".png"),this.container.addChild(this.ufoImg),this.ufoImg.x=this.startXPos,this.ufoImg.y=this.startYPos,"orange"===this.color?TweenMax.to(this.ufoImg,9,{bezier:[{x:230,y:this.startYPos+4},{x:450,y:this.startYPos-10},{x:140,y:this.startYPos+15},{x:20,y:this.startYPos}],ease:Power1.easeInOut,repeat:-1}):TweenMax.to(this.ufoImg,7,{bezier:[{x:210,y:this.startYPos+13},{x:430,y:this.startYPos-7},{x:20,y:this.startYPos}],ease:Sine.easeInOut,repeat:-1})},a}(),n=function(){var a=function(){};return a.getDistance=function(a,b){var c=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));return c},a.getAngle=function(a,b){var c=Math.atan(Math.abs(a.y-b.y)/Math.abs(a.x-b.x));return(b.x<a.x&&b.y>a.y||b.x>a.x&&b.y<a.y)&&(c=Math.PI-c),b.y<a.y&&(c+=Math.PI),0>c&&(c+=2*Math.PI),c>2*Math.PI&&(c-=2*Math.PI),c},a.proceedZeros=function(a){return 1===a.toString().length?"0000"+a:2===a.toString().length?"000"+a:3===a.toString().length?"00"+a:4===a.toString().length?"0"+a:a},a}(),o=function(){var a=function(a,b,c,d){this.x=a,this.y=b,this.h=c,this.v=0>d?0:d};return a.prototype.addVector=function(a){var b=this.getEndCoords(),c=a.getEndCoords(),d=b.x+c.x,e=b.y+c.y;return this.h=Math.atan(e/d),d>=0&&(this.h+=Math.PI),this.v=Math.sqrt(Math.pow(d,2)+Math.pow(e,2)),{x:this.x+d,y:this.y+e}},a.prototype.getEndCoords=function(){var a=-this.v*Math.sin(this.h),b=Math.sqrt(Math.pow(this.v,2)-Math.pow(a,2));return(this.h<=Math.PI/2||this.h>=1.5*Math.PI)&&(b=-b),{x:b,y:a}},a.prototype.setHeading=function(a){this.h=a,this.h>2*Math.PI&&(this.h-=2*Math.PI),this.h<0&&(this.h+=2*Math.PI)},a.prototype.getHeading=function(){return 57.2957795*this.h},a.prototype.clone=function(){var b=new a(this.x,this.y,this.h,this.v);return b},a}();new f}}({},function(){return this}());